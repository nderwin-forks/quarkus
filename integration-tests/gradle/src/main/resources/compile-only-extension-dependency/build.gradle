plugins {
    id 'java'
    id 'io.quarkus'
    id 'application'
}

repositories {
    mavenLocal {
        content {
            includeGroupByRegex 'io.quarkus.*'
            includeGroup 'org.hibernate.orm'
        }
    }
    mavenCentral()
}

dependencies {
    implementation enforcedPlatform("${quarkusPlatformGroupId}:${quarkusPlatformArtifactId}:${quarkusPlatformVersion}")
    implementation 'io.quarkus:quarkus-rest-jackson'
    compileOnly 'io.quarkus:quarkus-rest' // this is just to make sure quarkusDevCompileOnlyConfiguration can be resolved with proper attributes set
}

compileJava {
    options.compilerArgs << '-parameters'
}

application {
    mainClass = 'org.acme.EntryPoint'
}

run {
    // propagate the custom local maven repo, in case it's configured
    if (System.properties.containsKey('maven.repo.local')) {
        systemProperty 'maven.repo.local', System.properties.get('maven.repo.local')
    }
}

test {
    systemProperty "java.util.logging.manager", "org.jboss.logmanager.LogManager"
}
